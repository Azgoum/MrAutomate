<header class="sticky top-0 z-50 bg-white/95 backdrop-blur border-b border-stone-200" x-data="{ mobileMenuOpen: false }">
  <div class="container mx-auto px-4">
    <nav class="flex items-center justify-between h-16 lg:h-20">
      {# Logo #}
      <a href="/" class="block">
        <img src="/assets/images/logo.svg" alt="{{ metadata.site_name }}" class="h-8 w-auto">
      </a>

      {# Desktop Navigation - Centered #}
      <ul class="hidden lg:flex items-center gap-8 absolute left-1/2 -translate-x-1/2">
        {% for item in header.menu %}
        <li>
          <a href="{{ item.url }}" class="text-stone-600 hover:text-primary-700 font-medium transition-colors{% if page.url === item.url %} text-primary-700{% endif %}">
            {{ item.label }}
          </a>
        </li>
        {% endfor %}
      </ul>

      {# Desktop CTA + Search + Mobile Menu Button #}
      <div class="flex items-center gap-2 lg:gap-4">
        <a href="/search/" class="hidden lg:flex p-2 text-stone-600 hover:text-primary-700 transition-colors" aria-label="Search">
          {% phosphor "magnifying-glass", "bold", { size: 20 } %}
        </a>
        {% if header.cta.url %}
        <a href="{{ header.cta.url }}" class="hidden lg:inline-flex btn btn--primary btn--sm">
          {% if header.cta.icon %}{% phosphor header.cta.icon, "duotone", { size: 16 } %}{% endif %}
          <span>{{ header.cta.label }}</span>
        </a>
        {% endif %}

        {# Mobile Menu Button #}
        <button
          type="button"
          class="lg:hidden p-2 text-stone-600 hover:text-stone-900"
          @click="mobileMenuOpen = !mobileMenuOpen"
          :aria-expanded="mobileMenuOpen"
          aria-controls="mobile-menu"
          aria-label="Toggle menu"
        >
          <span x-show="!mobileMenuOpen">{% phosphor "list", "bold", { size: 24 } %}</span>
          <span x-show="mobileMenuOpen" x-cloak>{% phosphor "x", "bold", { size: 24 } %}</span>
        </button>
      </div>
    </nav>

    {# Mobile Navigation #}
    <div
      id="mobile-menu"
      x-show="mobileMenuOpen"
      x-cloak
      x-collapse
      class="lg:hidden overflow-hidden"
    >
      <ul class="flex flex-col gap-1 py-4">
        {% for item in header.menu %}
        <li>
          <a
            href="{{ item.url }}"
            class="block px-4 py-2.5 text-stone-600 hover:text-primary-700 hover:bg-stone-50 rounded-lg font-medium transition-colors{% if page.url === item.url %} text-primary-700 bg-primary-50{% endif %}"
          >
            {{ item.label }}
          </a>
        </li>
        {% endfor %}
        <li>
          <a
            href="/search/"
            class="flex items-center gap-2 px-4 py-2.5 text-stone-600 hover:text-primary-700 hover:bg-stone-50 rounded-lg font-medium transition-colors{% if page.url === '/search/' %} text-primary-700 bg-primary-50{% endif %}"
          >
            {% phosphor "magnifying-glass", "bold", { size: 20 } %}
            <span>Search</span>
          </a>
        </li>
        {% if header.cta.url %}
        <li class="pt-4 mt-4 border-t border-stone-200">
          <a href="{{ header.cta.url }}" class="btn btn--primary btn--full">
            {% if header.cta.icon %}{% phosphor header.cta.icon, "duotone", { size: 20 } %}{% endif %}
            <span>{{ header.cta.label }}</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </div>
  </div>
</header>
